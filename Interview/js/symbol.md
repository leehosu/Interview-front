# Symbol

자바스크립트는 객체 프로퍼티 키로 오직 문자형과 심볼형만을 허용한다.

숫자형, 불린형 모두 불가능하고 오직 문자형과 심볼형만 가능하다.

## symbol

`symbol`은 유일한 식별자(`unique identifer`)를 만들고 싶을 때 사용한다.

`Symbol()`을 사용하면 심볼값을 만들 수 있다.

```JS
let id = Symbol("id");
```

심볼을 만들 때 심볼 이름이라 불리는 설명을 붙일 수 있다.

위와 같이 심볼 이름은 디버깅 시 아주 유용하다.

심볼은 유일성이 보장되는 자료형이기 때문에, 설명이 동일한 심볼을 여러 개 만들어도 각 심볼 값이 다르다.

심볼에 붙이는 설명(심볼 이름)은 어떤 것에도 영향을 주지 않는 이름표 역할만 한다.

```js
let id1 = Symbol("id");
let id2 = Symbol("id");

alert(id1 == id2); // false
```

> if, 심볼을 문자형으로 바꾸고 싶다면 ? `toString()` 메소드를 호출해주면 된다.

## Hidden symbol

심볼을 이용하면 `hidden`(숨김) 프로퍼티를 만들 수 있다. 숨김 프로퍼티는 외부 코드에서 접근이 불가능하고 값도 덮어 쓸 수 없는 프로퍼티이다.

```js
let user = {
  name: "John"
};

let id = Symbol("id");

user[id] = 1;

alert(user[id]);
```

`user`는 서드파티 코드에서 가져온 객체이므로 함부로 새로운 프로퍼티를 추가할 수 없다. 즉, 서드파티 코드에 접근할 수 없기 때문에 심볼을 사용하면 서드파티 코드가 모르게 `user`에 식별자를 부여할 수 있다.

## 객체 리터럴과 심볼

객체 리터럴 `{...}`을 사용해 객체를 만든 경우, 대괄호를 사용해 심볼형 키를 만들어야 한다.

```js
let id = Symbol("id");

let user = {
  name: "John",
  [id]: 123
};
```

#### symbol은 for...in 에서 배제된다.

```js
let id = Symbol("id");
let user = {
  name: "John",
  age: 30,
  [id]: 123
};

for (let key in user) alert(key);
// name과 age만 출력되고, 심볼은 출력되지 않는다.
```

## 전역 심볼

어플리케이션 곳곳에 심볼 `"id"`를 이용하여 특정 프로퍼티에 접근해야 한다고 가정해보자.

전역 심볼 레지스트리안에 심볼을 만들고 해당 심볼에 접근하면, 이름이 같은 경우 동일한 심볼을 반환해준다.

레지스트리 안에 있는 심볼을 읽거나, 새로운 심볼을 생성하려면 `Symbol.for(key)`를 사용하면 된다.

이 메서드를 호출하면 이름이 `key`인 심볼이 반환된다.

조건에 맞는 심볼이 레지스트리안에 없으면 새로운 심볼 `Symbol(key)`을 만들고 레지스트리 안에 저장한다.

```js
let id = Symbol.for("id");
// 심볼이 존재하지 않으면 새로운 심볼을 만든다.

// 동일한 이름을 이용해 심볼을 다시 읽는다다.
// (좀 더 멀리 떨어진 코드에서도 가능).
let idAgain = Symbol.for("id");

// 두 심볼은 같다.
alert(id === idAgain); // true
```

## 요약

`symbol`은 원시형 데이터로, 유일무리한 식별자를 만드는 데 사용한다.

`Symbol()`을 호출하면 심볼을 만들 수 있다. 설명(이름)은 선택적으로 추가할 수 있다.

심볼은 이름이 같더라도 값이 항상 다르다. 이름이 같을 때 값도 같길 원한다면 전역 레지스트리를 사용해야 한다. `Symbol.for(key)`를 활용하여 전역 심볼을 만든다.
